Syntax Tree Interpretaion
ST упорядоченный набор стволов, каждый ствол соответствует выходной колонке
ST включает
1 Колонки
2 Операторы ( описания контекста)
3 Атрибуты
Описания контекста применяются к каждой колонке в порядке прохождения дерева, пока не будут отменены
Если в такой колонке не описан атрибут, он берется из действующего на этот момент контекста 
Каждый атрибут принадлежит какой-то колонке (или контексту)

Использование операторов и контекста
Оператор используется для включения установки атрибута на диапазон колонок или подзапрос
Должен быть справочник положений операторов в начале полосы

Формирование запроса

Запрос состоит из фраз select_fields from_table where order_by group_by
Каждая фраза собирается своим сборщиком со всех колонок  

Этапы построения запроса
1 Построение дерева
2 Уточнение контекста
  Восстановление умолчаний (добавление операторов)
  Вычисление контекста (вычисление и запись атрибутов)
3 Сборка фраз 
4 Слияние фраз  

Объединение таблиц
Join -часть является первой секцией выражения, в некотором роде заголовком
Вычисляется до фильтрации 
Состоит из выражений относящихся к одной таблице
Колонки ведущих блиц являются видимыми, ведомых -невидимыми


Группировка
Если есть агрегатные функции, все не имеющие их колонки считаются базой группы
Условие интепретируется как where, если относится к базе группы
 и как having если относится к агрегированной колонке 
Тем не менее зарезервирован оператор группировки / так как
  в SQL возможно многоуровневое группирование 

Аггрегатные функции aggregate
sum ++
avg +/
min *-
max *+
count +

Порядок и визуализация

В общем , порядок колонок на листе должен соответствовать рангу в упорядочивании
Отклонения от правила задаются операторами

Порядок Order
desc -
desc_null -^
null_desc ^-
asc_null +^
null_asc ^+
?
  Сдвинуть только порядок, не сдвигая колонки
ord_left -< +<
left_ord <- <+
ord_right
right_ord
?
положение на листе position
hidden ^
left <
right >
begin <<
end >>
Невидимые колонки в заголовке и подвале
top <^
down ^>

Вычисляемые колонки и математические выражения
Функции и выражения записываются как есть и в таком виде переносятся в запрос
Важно, что мнеомника и спецразметка не пересекаются с выражениями SQL
Обрезание
Функции trunc имеют специальную мнемонику, однако в синтаксическое дерево записывается полное выражение 


1 Построение дерева
  Исходное выражение разбивается на элементарные конструкции как написано , без добавления или интерпретации недостающих атрибутов 
  Они добавляются на этапе добавления умолчаний
  ( требуется колонка passage для записи прохода на котором элемент добавлен)
  Исключением является добавление пустой главной реляции, если он не указана?
2.1.Восстановление умолчаний
  Восстановление реляции
  Восстановление условий
  Восстановление группировки
    Если дерево содержит аггрегат, ко всем неагрегированным колонкам добавляется элемент group 
  Восстановление порядка
    Добавляется оператор asc в первой позиции, если есть другие операторы порядка(?)
  Восстановление локаций
#todo    Добавляются опреаторы краев страницы если есть страничные позиции и явный оператор края отсутствует
#todo    Добавляется оператор  краев полосы ,если он отсутствует
2.2.Вычисление контекста
  Расчет вхождения в группу 
  Расчет места в order clause
#todo  Расчет положения колонки
2.3 Проверка корректности
